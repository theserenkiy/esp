<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Vectorizer</title>

<script>

window.onload = async () => {
	sctx = document.getElementById('source').getContext('2d');
	tctx = document.getElementById('target').getContext('2d');
	let im = new Image();
	

	await new Promise(s => {
		im.onload = s;
		im.src = "/vect.png";
	})
	
	sctx.drawImage(im,0,0);

	let idata_s = sctx.getImageData(0,0,320,240);
	let idata_t = tctx.getImageData(0,0,320,240);

	let sdata = idata_s.data;
	let sgs = []
	for(let i=0; i < sdata.length; i+=4)
	{
		sgs.push((sdata[i]+sdata[i+1]+sdata[i+1])/3);
	}

	for(let i=0; i < sgs.length; i++)
	{
		idata_t.data[i*4] = 100;
		// idata_t.data[i*4+1] = 0;
		// idata_t.data[i*4+2] = 0;
		// idata_t.data[i*4+2] = 100;
	}

	tctx.putImageData(idata_t,0,0);
}

</script>
<style>
canvas {border: 1px solid #aaa}
</style>
</head>
<body>
	<canvas width="320" height="240" id="source"></canvas>
	<canvas width="320" height="240" id="target"></canvas>
</body>
</html>